FROM ubuntu:xenial
MAINTAINER NFS86 <jarbull86@gmail.com>

ENV DEBIAN_FRONTEND noninteractive
ENV LANG=C.UTF-8
ENV LC_ALL=C
ENV USE_CCACHE=1
ENV ANDROID_JACK_VM_ARGS="-Dfile.encoding=UTF-8 -XX:+TieredCompilation -Xmx120G"
ENV JAVA_OPTS=" -Xmx120G "
ENV BUILD_USERNAME=cirrus
ENV CCACHE_EXEC=/usr/bin/ccache
ENV BUILD_HOSTNAME=nfsproject
ENV JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
ENV USER=cirrus
ENV HOSTNAME=nfs-project
ENV TZ Asia/Jakarta
WORKDIR /tmp

RUN rm -f \
    /etc/profile \
    ~/.profile \
    ~/.bashrc

COPY ./proprietary /

RUN apt update

RUN apt install apt-utils sudo -y

RUN apt-get -yqq update \
    && apt-get install --no-install-recommends -yqq git nano wget curl python --fix-broken --fix-missing
    && curl --create-dirs -L -o /usr/local/bin/repo -O -L https://storage.googleapis.com/git-repo-downloads/repo \
    && chmod a+rx /usr/local/bin/repo \
    && rm -rf /var/lib/apt/lists/* /var/cache/apt/archives/* \
    && echo 'en_US.UTF-8 UTF-8' > /etc/locale.gen && /usr/sbin/locale-gen \
    && TZ=Asia/Jakarta \
    && ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
